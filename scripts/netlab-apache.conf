<VirtualHost *:80>
    ServerName netlab.local
    ServerAlias www.netlab.local
    ServerAdmin admin@netlab.local
    
    # Chemin du projet Laravel
    DocumentRoot /home/allomoh/Documents/netlab/public
    
    # Journalisation
    ErrorLog ${APACHE_LOG_DIR}/netlab_error.log
    CustomLog ${APACHE_LOG_DIR}/netlab_access.log combined
    
    # Configuration pour Laravel
    <Directory /home/allomoh/Documents/netlab/public>
        Options Indexes FollowSymLinks
        AllowOverride All
        Require all granted
        
        # Proxy vers PHP-FPM
        <FilesMatch \.php$>
            SetHandler "proxy:unix:/var/run/php/php8.2-fpm.sock|fcgi://localhost"
        </FilesMatch>
    </Directory>
    
    # Bloquer l'acc√®s aux fichiers sensibles
    <DirectoryMatch "^/.*/\.git/">
        Require all denied
    </DirectoryMatch>
    
    # Blocage des fichiers .env
    <FilesMatch "^\.env">
        Require all denied
    </FilesMatch>
</VirtualHost>
